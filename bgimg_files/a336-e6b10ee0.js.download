(window.webpackJsonp=window.webpackJsonp||[]).push([["a336"],{"/4n/":function(e,t,n){"use strict";(function(e){function r(){null!=e.document&&(document.activeElement&&document.activeElement.blur(),document.documentElement&&document.documentElement.focus())}n.d(t,"a",(function(){return r}))}).call(this,n("yLpj"))},DKwU:function(e,t,n){"use strict";var r=n("Z0mJ");const s=Object(r.a)({svgContents:'<g fill="none"><path d="m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9" /></g>',svgProps:{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"}},"IcSystemSearchStroked",{});t.a=s},OBQb:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI");function s(){const e=Object(r.useRef)(!1);return Object(r.useEffect)(()=>(e.current=!0,()=>{e.current=!1})),e}},SWRT:function(e,t,n){"use strict";function r(e){var t,n,r;return"NON_INTERACTIVE_MESSAGE"===e.suggestionType?"":null!==(t=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null==e||null===(r=e.searchParams)||void 0===r?void 0:r.query)&&void 0!==t?t:""}n.d(t,"a",(function(){return r}))},Vh4E:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("I9Za"),s=n.n(r),u=n("PuV7");function o(){return"zh"!==s.a.language()}function a(e,t){return!(!e||!t)&&u.a.logCustomHashing(e,t)}function c(e,t){return!(!e||!t)&&"treatment"===t}},enR6:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("/OX7");const s=["lat","lng","location","location_search","neighborhood_ids","place_id","query",...n("6J+J").g],u=["lat","lng"];function o(e={}){return[...new Set([...s,...r.b.filter(t=>{var n;return null!==(null!==(n=e[t])&&void 0!==n?n:null)})])].map(t=>({key:t,selected:!!e[t],value:e[t]||null,valueType:u.includes(t)?"number":"string"}))}},jV8O:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n("qBug"),s=n("SDye"),u=n("Ri7V");function o(){if(u.a.getBootstrap("flex_destinations_june_2021_launch_web_force"))return"flex_destinations_june_2021_launch_web_treatment";if(!u.a.getBootstrap("flex_destinations_june_2021_launch_web_enable"))return"flex_destinations_june_2021_launch_web_control";return"treatment"===Object(r.a)("flex_destinations_june_2021_launch_web")?"flex_destinations_june_2021_launch_web_treatment":"flex_destinations_june_2021_launch_web_control"}function a(){Object(s.a)("flex_destinations_june_2021_launch_web")}},kh3W:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("q1tI"),s=n.n(r);function u(e,t){const n=s.a.useRef(t),r=s.a.useRef(e);return e!==r.current&&(n.current=r.current,r.current=e),n.current}},llYu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("q1tI"),s=n("cVPA"),u=n.n(s),o=n("na8L");var a=n("kh3W");function c({id:e,onClear:t,onBlur:n,onFocus:s,onSelect:c,onSubmit:l,onActiveOption:p,suggestionCount:f,forceOpen:b=!1}){const[O,g]=Object(r.useReducer)(d,b,i),{activeIndex:m,isOpen:v,isFocused:_}=O,h=Object(r.useRef)(null),j=Object(r.useRef)(null),y=Object(a.a)(m);Object(r.useEffect)(()=>{"keyboard"===j.current&&y!==m&&(null==p||p(m))},[m,y,p]);const E=e+"-listbox";function x(e,t){null==c||c(e,t),j.current=t?"keyboard":"mouse",g({type:"leave",payload:b})}function I(e){e.preventDefault(),j.current="keyboard",-1===m||0===f?null==l||l():x(m,!0)}function w(e){"Enter"===e.key&&I(e)}const S=t=>`${e}-suggestion-${t}`;function N(e){j.current="mouse",g({type:"activeIndex",payload:e})}function T(e){g({type:"open"}),null==s||s(e)}function C(){null==n||n(),g({type:"leave",payload:b})}Object(r.useEffect)(()=>{null!=h&&h.current&&document.activeElement===h.current&&T()},[]);const[R]=function(e,t){const n=Object(r.useRef)(null),s=Object(o.a)(t);return Object(r.useEffect)(()=>{if(!e)return;const t=e=>{var t;!(null===(t=n.current)||void 0===t||!t.contains(e.target))||s()};return document.addEventListener("focus",t,!0),()=>{document.removeEventListener("focus",t,!0)}},[e]),[n]}(!b&&v,C);return{activeOptionIndex:m,getSuggestionProps:function(e){return{role:"option",isActive:m===e,onClick:()=>x(e,!1),onFocus:()=>N(e),onKeyUp:w,onMouseEnter:()=>N(e),tabIndex:-1,id:S(e),"data-index":e,"data-testid":"option-"+e}},isListboxOpen:v,isInputFocused:_,inputRef:h,onClearPress:function(e){e.preventDefault(),j.current="mouse",g({type:"clear"}),null==t||t();const n=setTimeout(()=>{var e;null==h||null===(e=h.current)||void 0===e||e.focus()});return()=>clearTimeout(n)},outsideRef:R,onBlur:C,descriptionId:e+"-description",inputProps:{"aria-activedescendant":m>=0?S(m):void 0,"aria-autocomplete":"both","aria-expanded":v,"aria-controls":v?E:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:!1,id:e+"-input",name:"query",onFocus:T,onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onKeyUp:function(e){switch(e.key){case"ArrowDown":return function(e){e.preventDefault(),j.current="keyboard",g({type:"moveDown",payload:{suggestionCount:f}})}(e);case"ArrowUp":return function(e){e.preventDefault(),j.current="keyboard",g({type:"moveUp",payload:{suggestionCount:f}})}(e);case"Enter":return I(e);case"Escape":return function(e){e.preventDefault(),j.current="keyboard",null==t||t(),g({type:"close",payload:b})}(e);default:/[\x20-\x7E]/.test(e.key)&&g({type:"open"})}},role:"combobox",ref:h},statusProps:{"aria-atomic":!0,"aria-live":"polite",role:"status"},listboxProps:{role:"listbox","aria-label":u.a.t("search.voiceover.VoiceOver_description_for_list_of_search_suggestions"),id:E,onMouseLeave:function(){j.current="mouse",g({type:"leaveListbox"})},tabIndex:-1},formProps:{role:"search"}}}function i(e){return{isOpen:e,activeIndex:-1,isFocused:!1}}function l(e,t,n){const r=n-1;let s=t+e;return s<-1&&(s=r),s>r&&(s=-1),s}function d(e,t){const{isOpen:n,activeIndex:r}=e;switch(t.type){case"leave":return i(t.payload);case"moveUp":{const{suggestionCount:s}=t.payload;if(s<=0||!n)return e;const u=l(-1,r,s);return Object.assign({},e,{activeIndex:u})}case"moveDown":{const{suggestionCount:s}=t.payload;if(s<=0)return e;if(!n)return Object.assign({},e,{isOpen:!0,activeIndex:0});const u=l(1,r,s);return Object.assign({},e,{activeIndex:u})}case"clear":return Object.assign({},e,{activeIndex:-1});case"open":return Object.assign({},e,{isFocused:!0,isOpen:!0});case"close":return Object.assign({},e,{isOpen:t.payload,activeIndex:-1});case"activeIndex":return Object.assign({},e,{activeIndex:t.payload});case"leaveListbox":return Object.assign({},e,{isFocused:!1,activeIndex:-1});default:return e}}},mPNv:function(e,t,n){"use strict";function r(e){return{key:"query",value:e,valueType:"string",selected:!0}}n.d(t,"a",(function(){return r}))},sBE8:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("q1tI"),s=n("IeNy"),u=n("rQBq"),o=n("wtiW"),a=n("/4n/"),c=n("tfQw"),i=n("lVss"),l=n("jV8O");var d=n("Zr9h"),p=n("CDBg"),f=n("44HA");var b=function(e,t,n){const s=Object(f.a)(t),u=Object(f.a)(n),o=Object(r.useRef)(null),a=Object(r.useRef)(0),c=Object(r.useRef)(null),l=Object(r.useCallback)(()=>{c.current&&c.current(),c.current=null},[]),d=Object(r.useCallback)((function(e,t,n){return o.current=e,new Promise(e=>e(t())).then(t=>{e>a.current?(a.current=e,s.current(t),null==n||n("resolved")):null==n||n("discarded")},e=>{var t;null==n||n("rejected"),null==u||null===(t=u.current)||void 0===t||t.call(u,e)})}),[u,s]),b=Object(r.useCallback)((function(t,n,r){let s=!1;const u=setTimeout(()=>{s=!0,d(t,n,r)},e);return()=>{s||(null==r||r("cancelled"),clearTimeout(u))}}),[e,d]),O=Object(r.useCallback)((function(t,n){const r=Object(i.b)().now();l(),null!=o.current?r-o.current>e?d(r,t,n):c.current=b(r,t,n):d(r,t,n)}),[l,b,e,d]);return Object(p.a)(()=>{l()}),{enqueue:O,clearQueue:l}},O=n("OBQb"),g=n("HnpV");const m=Object.freeze({sections:[{id:"predictions",type:"predictions",results:[]}],metadata:null,userInput:""});var v=n("puYV");function _(e,t,n){const s=function(e,t=["simple_search",Object(l.a)()]){const n=Object(r.useRef)(new c.a),[s,u]=Object(r.useState)(null),o=Object(r.useRef)(new Map),a=[e,t.toString()].filter(Boolean).join("|");return Object(r.useEffect)(()=>{let r=!1;const s=o.current.get(a);if(!(null!=s&&s.expires-Object(i.b)().now()>=0)||r)return n.current.init(Object.assign({autosuggestOptions:t},e&&{refinementPaths:[e]})).then(()=>n.current.sections()).then(e=>{r||(null!=e&&o.current.set(a,{expires:Object(i.b)().now()+3e4,sections:e}),u(e))}),()=>{r=!0};u(s.sections)},[a]),s}(n),u=function(e,t){const[n,s]=Object(r.useState)(m),u=Object(O.a)(),o=Object(f.a)(t),{enqueue:a,clearQueue:c}=b(200,(function(e){null!=e&&u.current&&s(e)}));return Object(r.useEffect)(()=>{if(!e)return s(m),void c();a(()=>Object(d.b)(e,o.current).then(({results:t,metadata:n})=>({sections:[{id:"predictions",type:"predictions",results:t}],metadata:n,userInput:e})))},[e,o,a,c]),n}(e||"",t);return e?{userInput:u.userInput,sections:u.sections,logMetadata:{input:u.userInput,results:u.sections[0].results,responseMetadata:u.metadata}}:null==s?null:{userInput:"",sections:s,logMetadata:{input:"",results:s.flatMap(e=>e.results),sectionTypesList:s.map(e=>e.type).filter(v.a),sectionTitlesList:s.map(e=>e.title).filter(v.a),maxNumRowsList:s.map(e=>e.maxNumRows).filter(v.a)}}}var h=n("8NF4"),j=n("bss5"),y=n("SWRT"),E=n("na8L");function x({autocompleteVertical:e,onBlur:t,onInputClear:n,onUpdateSearchType:c,onSelect:i,onSubmit:d,onFocus:p,refinementPath:b,responseFilters:O,searchContext:m,shouldLog:v=!0}){const x=Object(r.useRef)(new h.a),I=Object(f.a)(m),[w,S]=Object(r.useState)(null),N=Object(r.useCallback)(()=>S(null),[]),[,T]=Object(r.useState)(),[C,R]=Object(r.useState)(null),A=function(e,t,n){return{userMarket:e,maxResults:6,currentTab:Object(g.f)(n),shouldFilterByVerticalRefinement:!0,hideNavResults:!0,isSimpleSearch:!0,autocompleteVertical:t,excludeListingNames:!1,flexDestTreatmentFlag:Object(l.a)()}}(s.a.getData(),e,b),L=_(w,A,b),k=(null==L?void 0:L.sections)||[],F=k.flatMap(e=>e.results),P=null==L?void 0:L.logMetadata;Object(r.useEffect)(()=>{let e=!0;return s.a.sync().then(({versionChanged:t})=>{t&&e&&T({})}),()=>{e=!1}},[]);const D=Object(f.a)(c),B=Object(r.useCallback)((function(e){var t;R(null),null===(t=D.current)||void 0===t||t.call(D,j.d.SEARCH_QUERY),S(e)}),[]);const M=Object(E.a)(e=>{const t=-1===e?null:F[e];R(t?Object(y.a)(t):null)});Object(r.useEffect)(()=>{w||x.current.initialize()},[w]),Object(r.useEffect)(()=>{null!=P&&v&&x.current.logAutocompleteImpression(Object.assign({},P,{exploreSearchContext:I.current,responseMetadata:{}},s.a.getLoggingData()))},[null==L?void 0:L.userInput,v]);const U=null!=C?C:null!=w?w:null,G=F.length;return{allSuggestions:F,inputValue:U,clearUserInput:N,onActiveOption:M,onClear:function(){S(""),R(null),null==n||n(),Object(u.Q)({searchContext:m,searchFilters:O})},onBlur:function(){x.current.endSession(),null==t||t(),R(null),I.current&&Object(u.L)(I.current)},onFocus:function(e){w||x.current.startSession(),Object(l.b)(),null==p||p(e),I.current&&(Object(u.O)(I.current),Object(o.a)({searchContext:I.current,stagedFilters:O}))},onInputChange:B,onSelect:function(e,t){const n=F[e];N(),null!=P&&null!=n&&(x.current.logAutocompleteSelected(Object.assign({isKeyboardSubmission:t,results:k.flatMap(e=>e.results),selectedItem:n,activeIndex:e,input:w||"",exploreSearchContext:m},s.a.getLoggingData())),null==i||i(n))},onSubmit:function(){w&&(x.current.logAutocompleteSelected(Object.assign({isKeyboardSubmission:!0,results:[],activeIndex:-1,input:w||"",exploreSearchContext:I.current},s.a.getLoggingData())),Object(a.a)(),null==d||d(w))},sections:k,suggestionCount:G,userInput:w}}},tfQw:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("zLbU"),s=n.n(r),u=n("I9Za"),o=n.n(u),a=n("Qyje"),c=n.n(a),i=n("2jR3"),l=n("QD4+"),d=n("v8tp"),p=n("VqwG"),f=n("Ri7V"),b=n("qJkm"),O=n("Vh4E"),g=n("RnRr");function m(e){switch(e){case"LOCATIONS_NEARBY":return g.a.LOCATIONS_NEARBY;case"POIS_IN_LOCATION":return g.a.POIS_IN_LOCATION;case"REFINEMENT_PILLS":return g.a.REFINEMENT_SECTIONS;case"RECENT_SEARCHES":return g.a.RECENT_SEARCHES;case"THINGS_TO_DO_NEARBY":return g.a.THINGS_TO_DO_NEARBY;case"THINGS_TO_DO_IN_LOCATION":return g.a.THINGS_TO_DO_IN_LOCATION;case"TRENDING_LOCATIONS_NEARBY":return g.a.TRENDING_LOCATIONS_NEARBY;case"NEAR_ME":return g.a.NEAR_ME;default:return null}}function v(e){const{items:t,max_num_rows:n,type:r,title:s}=e,u=(t||[]).map(({display_name:e,explore_search_params:t,id:u,sub_title:o,suggestion_type:a,image_url:c,video_url:i,metadata:d},f)=>{const b=null!=e?e:null==t?void 0:t.query,O=t||{},{params:g}=O,m=babelHelpers.objectWithoutPropertiesLoose(O,["params"]),v=Object(p.a)(g),_=Object.assign({},m,v);return{key:u||"",name:b,description:o||"",itemOffsetWithinSection:f,prefix:(null==d?void 0:d.airmoji)||"description_clock",searchParams:_,sectionTitle:s||"",sectionMaxNumRows:n||Number.MAX_SAFE_INTEGER,source:l.b,suggestionType:r||"",searchType:a||r||"",title:b,imageUrl:null!=c?c:void 0,videoUrl:null!=i?i:void 0}});return"RECENT_SEARCHES"===r&&u.length>5?u.slice(0,5):u}class _{constructor(){this.autosuggestions=void 0,this.experimentName=void 0,this.experimentTreatment=void 0,this.showNearby=void 0,this.refinementPaths=void 0,this.autosuggestions=null,this.experimentName=void 0,this.experimentTreatment=void 0,this.showNearby=!1}init({refinementPaths:e,autosuggestOptions:t=[]}={}){this.refinementPaths=e;const n=Object(d.a)(),r={refinement_paths:e,options:null==t?void 0:t.join("|"),gps_lat:null==n?void 0:n.lat,gps_lng:null==n?void 0:n.lng};return Promise.resolve(fetch("/api/v2/autosuggestions?"+c.a.stringify(Object.assign({},r,{key:s.a.key(),locale:o.a.locale(),currency:b.a.current().curr}),{arrayFormat:"brackets"}))).then(e=>e.json()).catch(()=>({autosuggestions:[],show_nearby:!1})).then(e=>{if(!e||!Array.isArray(e.autosuggestions))throw new Error("Invalid autosuggestions response");const{autosuggestions:t,show_nearby:n,experiment_data:r}=e;if(r&&(this.experimentName=r.name,this.experimentTreatment=r.treatment_name,!Object(O.a)(this.experimentName,this.experimentTreatment))){return{autosuggestions:(t||[]).filter(e=>"THINGS_TO_DO_NEARBY"!==e.type&&"THINGS_TO_DO_IN_LOCATION"!==e.type),showNearby:n}}return{autosuggestions:t,showNearby:n}}).catch(e=>(Object(i.b)(e),{autosuggestions:[],showNearby:!1})).then(({autosuggestions:e,showNearby:t})=>{this.autosuggestions=e,this.showNearby=!!t})}setAutosuggestions(){}sections(e){const t=null==(n=this.autosuggestions)?[]:n.map(e=>({id:m(e.type)||e.type||"",title:e.title,results:v(e),type:e.type,maxNumRows:e.max_num_rows||void 0,displayType:e.display_type||void 0}));var n;return t.length?e?e(t):t:[]}nearbySection(){if(f.a.getBootstrap("tp_autosuggest_nearby_testing")||this.showNearby&&navigator.geolocation)return Object(g.c)()}getExperimentName(){return this.experimentName}getTreatmentName(){return this.experimentTreatment}}},wtiW:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n("VGgA"),s=n("rtqk"),u=n("g8Fj"),o=n("944x");function a(e,{stagedFilters:t,currentTab:n,searchContext:r}){const{location:s,checkin:a,checkout:c,guests:i}=t||{};u.a.logJitneyEvent({schema:e,event_data:{location:s||"",dates:[a||"",c||""],guests:void 0!==i?i:-1,subtab:Object(o.a)(n),search_context:r}})}function c(e){return a(r.a,e)}function i(e){return a(s.a,e)}},x5uF:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n("bss5"),s=n("HnpV"),u=n("enR6"),o=n("ZbJx"),a=n("rQBq"),c=n("IeNy"),i=n("v8tp");function l(){return c.a.sync().then(()=>({location:c.a.getMarket()}))}var d=n("wtiW"),p=n("cc4C"),f=n("6J+J");const b=e=>{};function O(e,t,n=b,c,O,g,m="default"){const{searchParams:v,searchType:_,suggestionType:h}=e;if(Object(o.b)(e)&&Object(o.a)(e),_===r.d.RECENT_SEARCH)return Object(a.P)({searchContext:g,searchFilters:O,nextSearchFilters:Object(f.t)(v,O)}),void Object(s.j)({stagedFilters:Object(f.t)(v,O),responseFilters:O,searchType:r.d.AUTOSUGGEST,shouldReloadInSameWindow:"reload-in-same-window"===m,openInNewWindow:"open-in-new-window"===m});if(_===r.d.GEOLOCATION||_===r.d.NEAR_ME)return l().then(e=>{const s=Object(u.a)(Object.assign({},v,e));n(r.d.AUTOSUGGEST),t(s,e=>{Object(d.b)({searchContext:g,newStagedFilters:e}),Object(a.N)({searchContext:g,searchFilters:O,nextSearchFilters:e})}),c()}).then(()=>navigator.geolocation?new Promise(e=>{navigator.geolocation.getCurrentPosition(({coords:{latitude:t,longitude:n,accuracy:r}})=>{Object(i.c)({lat:t,lng:n,accuracy:r}),e({lat:t,lng:n})},()=>e(l()),{timeout:5e3})}):l()).then(e=>{const n=Object(u.a)(Object.assign({},v,e));t(n)});if(_===r.d.AUTOSUGGEST){if(h===p.c.FLEXIBLE_DESTINATIONS)return void Object(s.j)({stagedFilters:Object(f.t)(v,O),responseFilters:O,searchType:r.d.AUTOSUGGEST,shouldReloadInSameWindow:"reload-in-same-window"===m,openInNewWindow:"open-in-new-window"===m});const e=Object(u.a)(v);n(r.d.AUTOSUGGEST),t(e,e=>{Object(d.b)({searchContext:g,newStagedFilters:e})}),c()}if(_===r.d.AUTOCOMPLETE){const s=Object(u.a)(v);n(r.d.AUTOCOMPLETE_CLICK),t(s,t=>{var n;(Object(d.b)({searchContext:g,newStagedFilters:t}),g)&&Object(a.f)(g,O,t,null===(n=e.responseMetadata)||void 0===n?void 0:n.requestId)}),c()}}}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/a336-35eac6dd.js.map