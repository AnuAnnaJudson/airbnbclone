(window.webpackJsonp=window.webpackJsonp||[]).push([["2a16"],{"Ss7+":function(t,e,o){"use strict";o.r(e),o.d(e,"FACEBOOK_ACTION_TYPE",(function(){return h})),o.d(e,"default",(function(){return g}));var n=o("tl9J"),r=o.n(n),i=o("8dvS"),c=o.n(i),s=o("OtDV"),a=o("wr5J"),u=o("qJkm"),d=o("ANar"),f=o("64m5"),_=o("EqMp"),b=o("yuvK"),l=o("2jR3"),p=o("VXjN");o.d(e,"autologinEnabled",(function(){return p.a}));var O=o("xAPW");o.d(e,"hasDismissedFacebookPrompt",(function(){return O.a}));const h={NO_AUTOLOGIN_AND_PROMPT:0,SHOW_FACEBOOK_PROMPT:1,FACEBOOK_AUTO_LOGIN:2};function k(){r()("nofbautologin",!0)}function g(){const t=Object(b.a)();t&&(Object(d.a)("facebook.js.get_login_status.started"),Object(b.b)().then(e=>{const o="unknown"!==(null==e?void 0:e.status)?e.status:null;if(c()("fbs",o,{path:"/"}),c()("fb_logout"))Object(b.g)().then(()=>{c()("fblo_"+t.appId,null,{domain:void 0,path:"/"})}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}),c()("fb_logout",null,{domain:Object(f.b)(),path:"/"}),k(),Object(d.a)("facebook.js.get_login_status.logout");else{if(Object(d.a)("facebook.js.get_login_status.response",1,["status:"+e.status,"is_logged_in:"+u.a.isLoggedIn(),"auto_login:"+Object(p.a)()]),/fb_action_ids=/.test(document.location.search)&&s.default.post("/users/detect_fb_session"),u.a.isLoggedIn())return;if("not_authorized"!==e.status&&"authorization_expired"!==e.status||Object(b.c)().then(t=>{const o=/^\d+$/.test(t);Object(d.a)("facebook.js.not_authorized.get_fb_user_id",1,["has_fb_user_id:"+o,"authorization_expired:"+("authorization_expired"===e.status)])}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}),"connected"===e.status&&!Object(O.a)()){const t={check_linked_airbnb_account:!0};s.default.post("/users/facebook_auto_login",t).then(t=>{if(t.has_linked_airbnb_account)(e=t.facebook_action)===h.SHOW_FACEBOOK_PROMPT?a.default.emit("initializeFacebookPrompt"):e===h.FACEBOOK_AUTO_LOGIN&&Object(p.a)()&&(Object(d.a)("facebook_auto_login.attempt"),s.default.post("/users/facebook_auto_login").then(t=>{t.success?Object(_.e)():k()}));else{const t=6048e5;r()("facebook_prompt_dismissed_p3",!0,{expires:t}),r()("facebook_prompt_dismissed",!0,{expires:t}),k()}var e})}}}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}))}},"v+iD":function(t,e,o){"use strict";function n(t){return new Promise((e,o)=>{const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.onload=e,n.onerror=o,n.src=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)})}o.d(e,"a",(function(){return n}))},yuvK:function(t,e,o){"use strict";o.d(e,"a",(function(){return d.a})),o.d(e,"e",(function(){return b})),o.d(e,"d",(function(){return p})),o.d(e,"b",(function(){return O})),o.d(e,"i",(function(){return h})),o.d(e,"h",(function(){return k})),o.d(e,"f",(function(){return g})),o.d(e,"g",(function(){return m})),o.d(e,"c",(function(){return w}));var n=o("ilXw"),r=o.n(n),i=o("I9Za"),c=o.n(i),s=o("v+iD");var a=o("IhWC"),u=o("ANar"),d=o("VMDH"),f=o("Ri7V");const _=[];function b(){var t;return!(null===(t=window)||void 0===t||!t.FB)}function l(){const t=r.a.get("facebook-init");return document.querySelector(`script[src="${t.sdkUrl}"]`)||(window.fbAsyncInit=()=>function(t){for(window.FB.init({appId:t,status:!0,cookie:!0,oauth:!0,version:"v6.0"});_.length>0;)_[0](window.FB),_.shift()}(t.appId),window.Airbnb&&(window.Airbnb.FACEBOOK_PERMS=t.scope),Object(s.a)(t.sdkUrl)),function(t,e){const o=new Promise((t,o)=>{setTimeout(()=>o(new Error(`Timeout after ${e}ms`)),e)});return Promise.race([t,o])}(new Promise(t=>_.push(t)),1e4).catch(()=>{throw Object(u.a)("facebook_sdk_init_timeout"),new Error("FB SDK init timeout")})}function p(){const t=r.a.get("facebook-init");if(null==t||!t.enabled)return Promise.reject(new Error("Facebook SDK isn't supported on this page"));if(b())return Promise.resolve(window.FB);const e=c.a.tld_country();return f.a.getBootstrap("facebook_sdk_default_off_country_toggle")?new Promise((t,o)=>{Object(a.a)("facebook.com",n=>{n?(Object(u.a)("facebook_sdk.cookie_check",1,["country:"+e,"sdk_disabled:false"]),l().then(e=>t(e))):(Object(u.a)("facebook_sdk.cookie_check",1,["country:"+e,"sdk_disabled:true"]),o(new Error("Facebook SDK isn't supported on this page because you have opted out of Facebook third party cookies.")))})}):(Object(u.a)("facebook_sdk.no_cookie_check",1,["country:"+e]),l())}function O(){return p().then(t=>new Promise(e=>t.getLoginStatus(e)))}function h(t){return p().then(e=>new Promise(o=>e.ui(t,o)))}function k(t){return p().then(e=>(e.XFBML&&e.XFBML.parse(t),Promise.resolve()))}function g(t){return p().then(e=>new Promise(o=>e.login(o,t)))}function m(){return p().then(t=>new Promise(e=>t.logout(e)))}function w(){return p().then(t=>t.getUserID())}}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/facebookAutoLogin-dca9b86f.js.map